(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c,a=n(12),o=n.n(a),r=n(7),s=(n(17),n(18),n(19),n(9)),u=n(4),l=n(0),i=n.n(l),j=n(8),d=n.n(j),b=n(6),p=n(5),h=n.n(p),f="https://mate.academy/students-api/users",m=2451,O=function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.ok?n.json():null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x="https://mate.academy/students-api/todos",v=function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"?userId=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.ok?n.json():[]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x,{headers:{"Content-type":"application/json; charset=UTF-8"},method:"POST",body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/").concat(t),{headers:{"Content-type":"application/json; charset=UTF-8"},method:"PATCH",body:JSON.stringify(n)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.All="all",e.Active="active",e.Completed="completed"}(c||(c={}));var y=n(2),N=n(1),w=i.a.memo((function(e){var t=e.todo,n=e.setTodos,c=Object(l.useState)(!1),a=Object(u.a)(c,2),o=a[0],r=a[1],s=Object(l.useState)(t.title),i=Object(u.a)(s,2),j=i[0],b=i[1],p=Object(l.useRef)(document.createElement("input")),h=Object(l.useCallback)((function(){k(t.id,{completed:!t.completed}).then((function(){return v(m)})).then(n)}),[t]),f=Object(l.useCallback)((function(){C(t.id).then((function(){return v(m)})).then(n)}),[t]),O=Object(l.useCallback)((function(){r(!0)}),[]),x=Object(l.useCallback)((function(){j?(r(!1),k(t.id,{title:j}).then((function(){return v(m)})).then(n)):C(t.id).then((function(){return v(m)})).then(n)}),[j]),g=Object(l.useCallback)((function(e){switch(e.key){case"Enter":x();break;case"Escape":r(!1),b(t.title)}}),[t]);return Object(l.useEffect)((function(){o&&p.current.focus()}),[o]),Object(N.jsxs)("li",{className:d()({completed:t.completed},{editing:o}),children:[Object(N.jsxs)("div",{className:"view",children:[Object(N.jsx)("input",{type:"checkbox",className:"toggle",checked:t.completed,onChange:h}),Object(N.jsx)("label",{onDoubleClick:O,children:t.title}),Object(N.jsx)("button",{type:"button",className:"destroy",onClick:f})]}),Object(N.jsx)("input",{type:"text",className:"edit",ref:p,value:j,onChange:function(e){return b(e.target.value)},onBlur:x,onKeyDown:g})]},t.id)})),T=function(e){var t=e.todos,n=e.setTodos;return Object(N.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(N.jsx)(w,{todo:e,setTodos:n},e.id)}))})},E=i.a.memo((function(e){var t=e.todos,n=e.setTodos;return Object(N.jsxs)(y.d,{children:[Object(N.jsx)(y.b,{path:"/",element:Object(N.jsx)(T,{todos:t,setTodos:n})}),Object(N.jsx)(y.b,{path:c.All,element:Object(N.jsx)(y.a,{to:"/"})}),Object(N.jsx)(y.b,{path:c.Active,element:Object(N.jsx)(T,{todos:t.filter((function(e){return!e.completed})),setTodos:n})}),Object(N.jsx)(y.b,{path:c.Completed,element:Object(N.jsx)(T,{todos:t.filter((function(e){return e.completed})),setTodos:n})}),Object(N.jsx)(y.b,{path:"*",element:Object(N.jsx)(y.a,{to:"/"})})]})})),A=function(){var e=Object(l.useState)(!0),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(l.useState)(null),i=Object(u.a)(o,2),j=i[0],b=i[1],p=Object(l.useState)([]),h=Object(u.a)(p,2),f=h[0],x=h[1],y=Object(l.useState)(""),w=Object(u.a)(y,2),T=w[0],A=w[1],S=Object(l.useMemo)((function(){return f.filter((function(e){return!e.completed}))}),[f]),D=Object(l.useMemo)((function(){return n?"Loading...":"Couldn't connect to server"}),[n]);Object(l.useEffect)((function(){v(m).then(x),O(m).then((function(e){b(e),a(!1)}))}),[]);var J=Object(l.useCallback)((function(e){e.preventDefault(),g({userId:m,title:T,completed:!1}).then((function(){A(""),v(m).then(x)}))}),[m,T]),F=Object(l.useCallback)((function(){var e=[];0===S.length||S.length===f.length?f.forEach((function(t){k(t.id,{completed:!t.completed}),e.push(Object(s.a)(Object(s.a)({},t),{},{completed:!t.completed}))})):f.forEach((function(t){t.completed?e.push(t):(k(t.id,{completed:!0}),e.push(Object(s.a)(Object(s.a)({},t),{},{completed:!0})))})),x(e)}),[f,S]),I=Object(l.useCallback)((function(){var e=[];f.forEach((function(t){t.completed?C(t.id):e.push(t)})),x(e)}),[f]);return Object(N.jsxs)("section",{className:"todoapp",children:[Object(N.jsxs)("header",{className:"header",children:[Object(N.jsx)("h1",{children:j?"".concat(j.name," todos"):D}),Object(N.jsx)("form",{onSubmit:J,children:Object(N.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:T,onChange:function(e){return A(e.target.value)}})})]}),Object(N.jsxs)("section",{className:"main",children:[Object(N.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",onChange:F}),Object(N.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),f.length>0&&Object(N.jsx)(E,{todos:f,setTodos:x})]}),f.length>0&&Object(N.jsxs)("footer",{className:"footer",children:[Object(N.jsx)("span",{className:"todo-count",children:"".concat(S.length," items left")}),Object(N.jsxs)("ul",{className:"filters",children:[Object(N.jsx)("li",{children:Object(N.jsx)(r.b,{to:"/",className:function(e){var t=e.isActive;return d()({selected:t})},children:"All"})}),Object(N.jsx)("li",{children:Object(N.jsx)(r.b,{to:"/".concat(c.Active),className:function(e){var t=e.isActive;return d()({selected:t})},children:"Active"})}),Object(N.jsx)("li",{children:Object(N.jsx)(r.b,{to:"/".concat(c.Completed),className:function(e){var t=e.isActive;return d()({selected:t})},children:"Completed"})})]}),S.length!==f.length&&Object(N.jsx)("button",{type:"button",className:"clear-completed",onClick:I,children:"Clear completed"})]})]})};o.a.render(Object(N.jsx)(r.a,{children:Object(N.jsx)(A,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.61789c59.chunk.js.map